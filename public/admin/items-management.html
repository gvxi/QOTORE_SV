<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Items Management - Qotore Admin</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Qotore Admin">
    
    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="items-management-style.css">
    
    <!-- Preload critical scripts -->
    <link rel="preload" href="items-management-script.js" as="script">
</head>
<body>
    <!-- Navigation Header -->
    <header class="admin-header">
        <div class="header-content">
            <div class="header-left">
                <h1>Items Management</h1>
                <div class="breadcrumb">
                    <a href="index.html">Dashboard</a> 
                    <span class="breadcrumb-separator">/</span> 
                    <span>Items Management</span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="connection-status online" id="connectionStatus">
                    <i class="icon-wifi"></i>
                    <span>Online</span>
                </div>
                
                <button class="btn btn-outline" id="refreshBtn" title="Refresh Data">
                    <i class="icon-refresh"></i>
                    <span class="refresh-text">Refresh</span>
                </button>
                
                <div class="admin-profile">
                    <div class="profile-info">
                        <span class="profile-name">Admin</span>
                        <span class="profile-role">Administrator</span>
                    </div>
                    <button class="profile-logout" onclick="logout()" title="Logout">
                        <i class="icon-log-out"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="icon-package"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Total Items</div>
                    <div class="stat-value" id="totalFragrances">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="icon-eye"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Visible Items</div>
                    <div class="stat-value" id="visibleFragrances">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="icon-eye-off"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Hidden Items</div>
                    <div class="stat-value" id="hiddenFragrances">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="icon-star"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Featured Items</div>
                    <div class="stat-value" id="featuredFragrances">0</div>
                </div>
            </div>
        </div>

        <!-- Controls Section -->
        <div class="controls-section" id="fragrancesControls">
            <div class="controls-left">
                <div class="search-box">
                    <i class="icon-search"></i>
                    <input 
                        type="text" 
                        id="fragrancesSearch" 
                        placeholder="Search fragrances..." 
                        autocomplete="off"
                    >
                    <button class="search-clear" id="fragrancesClearSearch" style="display: none;">
                        <i class="icon-x"></i>
                    </button>
                </div>
                
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all">
                        <i class="icon-list"></i>
                        All
                    </button>
                    <button class="filter-btn" data-filter="visible">
                        <i class="icon-eye"></i>
                        Visible
                    </button>
                    <button class="filter-btn" data-filter="hidden">
                        <i class="icon-eye-off"></i>
                        Hidden
                    </button>
                </div>
            </div>
            
            <div class="controls-right">
                <select id="fragrancesPerPage" class="select-input">
                    <option value="10">10 per page</option>
                    <option value="25">25 per page</option>
                    <option value="50">50 per page</option>
                    <option value="100">100 per page</option>
                </select>
                
                <button class="btn btn-primary" onclick="openAddFragranceModal()">
                    <i class="icon-plus"></i>
                    Add New Item
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div class="loading-state" id="fragrancesLoading">
            <div class="loading-spinner"></div>
            <p>Loading fragrances...</p>
        </div>

        <!-- Main Content Area -->
        <div class="content-area" id="fragrancesContent" style="display: none;">
            <!-- Fragrances Table -->
            <div class="table-container">
                <table class="data-table" id="fragrancesTable">
                    <thead>
                        <tr>
                            <th class="sortable" data-sort="name">
                                <span>Name</span>
                                <i class="sort-icon icon-chevron-up-down"></i>
                            </th>
                            <th class="sortable" data-sort="brand">
                                <span>Brand</span>
                                <i class="sort-icon icon-chevron-up-down"></i>
                            </th>
                            <th>Description</th>
                            <th>Variants</th>
                            <th class="sortable" data-sort="status">
                                <span>Status</span>
                                <i class="sort-icon icon-chevron-up-down"></i>
                            </th>
                            <th class="sortable" data-sort="created_at">
                                <span>Added</span>
                                <i class="sort-icon icon-chevron-up-down"></i>
                            </th>
                            <th class="actions-column">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <div class="pagination-section">
                <div class="pagination-info" id="fragrancesInfo">
                    <!-- Pagination info will be inserted here -->
                </div>
                <div class="pagination-controls" id="fragrancesPagination">
                    <!-- Pagination controls will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="fragrancesEmpty" style="display: none;">
            <div class="empty-icon">
                <i class="icon-package"></i>
            </div>
            <h3>No fragrances found</h3>
            <p>Get started by adding your first fragrance to the inventory.</p>
            <button class="btn btn-primary" onclick="openAddFragranceModal()">
                <i class="icon-plus"></i>
                Add First Fragrance
            </button>
        </div>

        <!-- No Results State -->
        <div class="empty-state" id="fragrancesNoResults" style="display: none;">
            <div class="empty-icon">
                <i class="icon-search"></i>
            </div>
            <h3>No results found</h3>
            <p>Try adjusting your search terms or filters.</p>
            <button class="btn btn-outline" onclick="clearFragrancesSearch()">
                <i class="icon-x"></i>
                Clear Search
            </button>
        </div>

        <!-- Error State -->
        <div class="error-state" id="fragrancesError" style="display: none;">
            <div class="error-icon">
                <i class="icon-alert-triangle"></i>
            </div>
            <h3>Failed to load fragrances</h3>
            <p>There was an error loading the fragrances data. Please try again.</p>
            <button class="btn btn-primary" onclick="refreshData()">
                <i class="icon-refresh"></i>
                Try Again
            </button>
        </div>
    </main>

    <!-- Add/Edit Fragrance Modal -->
    <div class="modal-overlay" id="fragranceModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="fragranceModalTitle">Add New Fragrance</h3>
                <button class="modal-close" onclick="closeFragranceModal()">
                    <i class="icon-x"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="fragranceForm" onsubmit="return false;">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="fragranceName">Name *</label>
                            <input 
                                type="text" 
                                id="fragranceName" 
                                name="name" 
                                class="form-input" 
                                required 
                                placeholder="Enter fragrance name"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="fragranceBrand">Brand</label>
                            <input 
                                type="text" 
                                id="fragranceBrand" 
                                name="brand" 
                                class="form-input" 
                                placeholder="Enter brand name"
                            >
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="fragranceDescription">Description</label>
                            <textarea 
                                id="fragranceDescription" 
                                name="description" 
                                class="form-textarea" 
                                rows="3" 
                                placeholder="Enter fragrance description"
                            ></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="fragranceImage">Image URL</label>
                            <input 
                                type="url" 
                                id="fragranceImage" 
                                name="image" 
                                class="form-input" 
                                placeholder="https://example.com/image.jpg"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="visible" value="true" checked>
                                    <span class="radio-custom"></span>
                                    Visible
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="visible" value="false">
                                    <span class="radio-custom"></span>
                                    Hidden
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label>Variants & Pricing</label>
                            <div class="variants-section" id="variantsSection">
                                <div class="variant-item" data-variant-id="0">
                                    <div class="variant-inputs">
                                        <input 
                                            type="text" 
                                            class="variant-size" 
                                            placeholder="Size (e.g., 5ml, 10ml)" 
                                            required
                                        >
                                        <input 
                                            type="number" 
                                            class="variant-price" 
                                            placeholder="Price" 
                                            step="0.01" 
                                            min="0" 
                                            required
                                        >
                                        <button type="button" class="btn btn-danger btn-sm" onclick="removeVariant(0)">
                                            <i class="icon-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline btn-sm" onclick="addVariant()">
                                <i class="icon-plus"></i>
                                Add Variant
                            </button>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-outline" onclick="closeFragranceModal()">
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-primary" id="saveFragranceBtn">
                            <i class="icon-save"></i>
                            Save Fragrance
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="admin-footer">
        <div class="footer-content">
            <div class="footer-left">
                <p>&copy; 2024 Qotore Admin. All rights reserved.</p>
                <p>Items Management v1.0</p>
            </div>
            <div class="footer-right">
                <div class="footer-links">
                    <a href="https://instagram.com/qotore" target="_blank" title="Follow us on Instagram">
                        <i class="icon-instagram"></i>
                    </a>
                    <a href="https://snapchat.com/add/qotore" target="_blank" title="Add us on Snapchat">
                        <i class="icon-camera"></i>
                    </a>
                    <a href="https://wa.me/96812345678" target="_blank" title="Contact us on WhatsApp">
                        <i class="icon-message-circle"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/96812345678" target="_blank" class="whatsapp-float" title="Contact Support on WhatsApp">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"/>
        </svg>
    </a>

    <script src="items-management-script.js"></script>
</body>
</html>