<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Qotor</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo-section">
                <img src="/api/image/logo.png" alt="Qotor" class="logo-image" onerror="this.style.display='none';">
                <div class="logo">Qotor Admin</div>
            </div>
            
            <div class="header-actions">
                <!-- Language Switcher -->
                <div class="language-switcher">
                    <button class="lang-btn" onclick="toggleLanguage()" id="langBtn">
                        <img src="/api/image/language-icon.png" alt="Language" onerror="this.textContent='ðŸŒ';">
                        <span id="currentLang">EN</span>
                    </button>
                </div>
                
                <!-- View Store Button -->
                <a href="/" class="view-store-btn" target="_blank">
                    <img src="/api/image/store-icon.png" alt="Store" onerror="this.textContent='ðŸª';">
                    <span data-key="view_store">View Store</span>
                </a>
                
                <div class="admin-info">
                    <img src="/api/image/user-icon.png" alt="Admin" class="admin-avatar" onerror="this.textContent='ðŸ‘¤';">
                    <span class="admin-name" data-key="admin">Admin</span>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <img src="/api/image/logout-icon.png" alt="Logout" onerror="this.textContent='ðŸšª';">
                    <span data-key="logout">Logout</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-menu">
                <button class="nav-item active" onclick="switchTab('orders')" data-tab="orders">
                    <img src="/api/image/orders-icon.png" alt="Orders" onerror="this.textContent='ðŸ“¦';">
                    <span data-key="orders">Orders</span>
                    <div class="nav-indicator"></div>
                </button>
                <button class="nav-item" onclick="switchTab('fragrances')" data-tab="fragrances">
                    <img src="/api/image/fragrances-icon.png" alt="Fragrances" onerror="this.textContent='ðŸŒ¸';">
                    <span data-key="fragrances">Fragrances</span>
                    <div class="nav-indicator"></div>
                </button>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="content">
            <!-- Orders Tab -->
            <div id="ordersTab" class="tab-content active">
                <div class="content-header">
                    <div class="page-title">
                        <img src="/api/image/orders-icon.png" alt="Orders" class="page-icon" onerror="this.style.display='none';">
                        <h1 data-key="orders_management">Orders Management</h1>
                    </div>
                    
                    <div class="content-actions">
                        <div class="search-container">
                            <img src="/api/image/search-icon.png" alt="Search" class="search-icon" onerror="this.textContent='ðŸ”';">
                            <input type="text" id="ordersSearch" class="search-input" placeholder="Search orders..." data-key-placeholder="search_orders">
                        </div>
                        
                        <select id="ordersFilter" class="filter-select">
                            <option value="all" data-key="all_orders">All Orders</option>
                            <option value="pending" data-key="pending">Pending</option>
                            <option value="completed" data-key="completed">Completed</option>
                            <option value="canceled" data-key="canceled">Canceled</option>
                        </select>
                        
                        <button class="refresh-btn" onclick="refreshOrders()">
                            <img src="/api/image/refresh-icon.png" alt="Refresh" onerror="this.textContent='ðŸ”„';">
                        </button>
                    </div>
                </div>

                <!-- Orders Loading -->
                <div id="ordersLoading" class="loading-section">
                    <div class="loading-spinner"></div>
                    <p data-key="loading_orders">Loading orders...</p>
                </div>

                <!-- Orders Table -->
                <div id="ordersTable" class="table-container" style="display: none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-key="order_id">Order ID</th>
                                <th data-key="customer">Customer</th>
                                <th data-key="items">Items</th>
                                <th data-key="total">Total</th>
                                <th data-key="status">Status</th>
                                <th data-key="date">Date</th>
                                <th data-key="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be populated here -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty Orders -->
                <div id="emptyOrders" class="empty-state" style="display: none;">
                    <img src="/api/image/empty-orders-icon.png" alt="No Orders" class="empty-icon" onerror="this.textContent='ðŸ“¦';">
                    <h3 data-key="no_orders">No Orders Found</h3>
                    <p data-key="orders_will_appear">Customer orders will appear here once they start placing orders.</p>
                </div>
            </div>

            <!-- Fragrances Tab -->
            <div id="fragrancesTab" class="tab-content">
                <div class="content-header">
                    <div class="page-title">
                        <img src="/api/image/fragrances-icon.png" alt="Fragrances" class="page-icon" onerror="this.style.display='none';">
                        <h1 data-key="fragrances_management">Fragrances Management</h1>
                    </div>
                    
                    <div class="content-actions">
                        <div class="search-container">
                            <img src="/api/image/search-icon.png" alt="Search" class="search-icon" onerror="this.textContent='ðŸ”';">
                            <input type="text" id="fragrancesSearch" class="search-input" placeholder="Search fragrances..." data-key-placeholder="search_fragrances">
                        </div>
                        
                        <select id="fragrancesFilter" class="filter-select">
                            <option value="all" data-key="all_status">All Status</option>
                            <option value="visible" data-key="visible_only">Visible Only</option>
                            <option value="hidden" data-key="hidden_only">Hidden Only</option>
                        </select>
                        
                        <button class="add-btn" onclick="openAddFragranceModal()">
                            <img src="/api/image/plus-icon.png" alt="Add" onerror="this.textContent='+';">
                            <span data-key="add_fragrance">Add Fragrance</span>
                        </button>
                    </div>
                </div>

                <!-- Fragrances Loading -->
                <div id="fragrancesLoading" class="loading-section">
                    <div class="loading-spinner"></div>
                    <p data-key="loading_fragrances">Loading fragrances...</p>
                </div>

                <!-- Fragrances Table -->
                <div id="fragrancesTable" class="table-container" style="display: none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-key="image">Image</th>
                                <th data-key="name">Name</th>
                                <th data-key="brand">Brand</th>
                                <th data-key="variants">Variants</th>
                                <th data-key="status">Status</th>
                                <th data-key="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="fragrancesTableBody">
                            <!-- Fragrances will be populated here -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty Fragrances -->
                <div id="emptyFragrances" class="empty-state" style="display: none;">
                    <img src="/api/image/empty-fragrances-icon.png" alt="No Fragrances" class="empty-icon" onerror="this.textContent='ðŸŒ¸';">
                    <h3 data-key="no_fragrances">No Fragrances Found</h3>
                    <p data-key="add_first_fragrance">Add your first fragrance to get started.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Order Details Modal -->
    <div class="modal-overlay" id="orderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" data-key="order_details">Order Details</h3>
                <button class="close-btn" onclick="closeOrderModal()">
                    <img src="/api/image/close-icon.png" alt="Close" onerror="this.textContent='âœ•';">
                </button>
            </div>
            <div class="modal-body" id="orderModalBody">
                <!-- Order details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Fragrance Modal -->
    <div class="modal-overlay" id="fragranceModal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3 class="modal-title" id="fragranceModalTitle" data-key="add_fragrance">Add Fragrance</h3>
                <button class="close-btn" onclick="closeFragranceModal()">
                    <img src="/api/image/close-icon.png" alt="Close" onerror="this.textContent='âœ•';">
                </button>
            </div>
            <div class="modal-body">
                <form id="fragranceForm" class="fragrance-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="fragranceName">
                                <img src="/api/image/name-icon.png" alt="Name" class="label-icon" onerror="this.style.display='none';">
                                <span data-key="name">Name</span> *
                            </label>
                            <input type="text" id="fragranceName" class="form-input" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="fragranceBrand">
                                <img src="/api/image/brand-icon.png" alt="Brand" class="label-icon" onerror="this.style.display='none';">
                                <span data-key="brand">Brand</span>
                            </label>
                            <input type="text" id="fragranceBrand" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="fragranceDescription">
                            <img src="/api/image/description-icon.png" alt="Description" class="label-icon" onerror="this.style.display='none';">
                            <span data-key="description">Description</span> *
                        </label>
                        <textarea id="fragranceDescription" class="form-textarea" required rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="fragranceImageFile">
                            <img src="/api/image/image-icon.png" alt="Image" class="label-icon" onerror="this.style.display='none';">
                            <span data-key="fragrance_image">Fragrance Image</span> (PNG only)
                        </label>
                        <div class="file-upload-container">
                            <input type="file" id="fragranceImageFile" class="file-input" accept="image/png" onchange="handleImageUpload(this)">
                            <div class="file-upload-area" onclick="document.getElementById('fragranceImageFile').click()">
                                <img src="/api/image/upload-icon.png" alt="Upload" class="upload-icon" onerror="this.textContent='ðŸ“¤';">
                                <span class="upload-text" data-key="click_to_upload">Click to upload PNG image</span>
                                <span class="upload-subtext" data-key="png_only">PNG files only, max 5MB</span>
                            </div>
                            <div id="imagePreview" class="image-preview" style="display: none;">
                                <img id="previewImg" src="" alt="Preview">
                                <button type="button" class="remove-image-btn" onclick="removeImage()">
                                    <img src="/api/image/close-icon.png" alt="Remove" onerror="this.textContent='âœ•';">
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Variants Selection -->
                    <div class="form-group">
                        <label class="form-label">
                            <img src="/api/image/variants-icon.png" alt="Variants" class="label-icon" onerror="this.style.display='none';">
                            <span data-key="available_variants">Available Variants</span> *
                        </label>
                        <div class="variants-container">
                            <div class="variant-option" data-variant="5ml">
                                <input type="checkbox" id="variant5ml" class="variant-checkbox">
                                <label for="variant5ml" class="variant-label">
                                    <span class="variant-size">5ml</span>
                                    <div class="variant-price-container">
                                        <input type="number" class="variant-price-input" placeholder="0.000" step="0.001" min="0">
                                        <span class="currency">OMR</span>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="variant-option" data-variant="10ml">
                                <input type="checkbox" id="variant10ml" class="variant-checkbox">
                                <label for="variant10ml" class="variant-label">
                                    <span class="variant-size">10ml</span>
                                    <div class="variant-price-container">
                                        <input type="number" class="variant-price-input" placeholder="0.000" step="0.001" min="0">
                                        <span class="currency">OMR</span>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="variant-option" data-variant="30ml">
                                <input type="checkbox" id="variant30ml" class="variant-checkbox">
                                <label for="variant30ml" class="variant-label">
                                    <span class="variant-size">30ml</span>
                                    <div class="variant-price-container">
                                        <input type="number" class="variant-price-input" placeholder="0.000" step="0.001" min="0">
                                        <span class="currency">OMR</span>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="variant-option" data-variant="full-bottle">
                                <input type="checkbox" id="variantFullBottle" class="variant-checkbox">
                                <label for="variantFullBottle" class="variant-label">
                                    <span class="variant-size" data-key="full_bottle">Full Bottle</span>
                                    <div class="variant-price-container">
                                        <input type="number" class="variant-price-input" placeholder="0.000" step="0.001" min="0">
                                        <span class="currency">OMR</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="variants-note">
                            <img src="/api/image/info-icon.png" alt="Info" onerror="this.textContent='â„¹ï¸';">
                            <span data-key="select_at_least_one">Select at least one variant with a price</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeFragranceModal()">
                            <img src="/api/image/cancel-icon.png" alt="Cancel" onerror="this.textContent='âœ•';">
                            <span data-key="cancel">Cancel</span>
                        </button>
                        <button type="submit" class="btn btn-primary" id="fragranceSubmitBtn">
                            <img src="/api/image/save-icon.png" alt="Save" onerror="this.textContent='ðŸ’¾';">
                            <span data-key="save_fragrance">Save Fragrance</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <img src="/api/image/success-icon.png" alt="Success" class="toast-icon" onerror="this.style.display='none';">
        <span class="toast-message"></span>
    </div>

    <script src="admin.js"></script>
</body>
</html>